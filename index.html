<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<title>登录次数</title>
<link rel=stylesheet type="text/css" href="color.css">
<script>
window.addEventListener('load', () => {
    inputSpan.style.display='none';    /*隐藏输入框和提交按钮*/
    if(typeof(Storage)=="undefined")
    {
        alert("Sorry！您的浏览器不支持Web Storage。");
    } else {
        /*判断姓名是否已存入localStorage，已存入时才执行{}内的程序语句*/
        if (localStorage.username) {
            /*localStorage.counter数据不存在时返回undefined*/
            if (!localStorage.counter) {
                localStorage.counter = 1;      /*初始值设为1*/
            } else {
                localStorage.counter++;        /*累加*/
            }
            btn_login.style.display='none';   /*隐藏登录按钮*/
            show_LocalStorage.innerHTML= localStorage.username+" 您好,这是您第"+localStorage.counter+"次来到网站。";
        }
        btn_login.addEventListener("click", login);
        btn_send.addEventListener("click", sendok);
        btn_logout.addEventListener("click", clearLocalStorage); 
    }
})

function sendok(){
    localStorage.username=inputname.value;
    location.reload();               /*重新加载网页*/
}

function login(){
    inputSpan.style.display='';	   /*显示姓名输入框和提交按钮*/
}
function clearLocalStorage(){
		localStorage.clear();          /*清空localStorage*/
		show_LocalStorage.innerHTML="已成功注销！";
		btn_login.style.display='';   /*显示登录按钮*/
		inputSpan.style.display='';   /*显示姓名输入框和提交按钮*/
}
</script> 
<script>
/* 时间 */
function time() {
  t_div = document.getElementById('showtime');
  var now = new Date()
  setTimeout(time, 1000);
  var dangqian = now.getFullYear() + "-" + (now.getMonth() + 1) + "-" + now.getDate() ;
  t_div.innerHTML="已经勉强运行："+ DateDiff("2021-4-27",dangqian) +" 天";
}
/* 计算运行天数的封装函数 */
function  DateDiff(sDate1,  sDate2){    //sDate1和sDate2是2002-12-18格式  
  var  aDate,  oDate1,  oDate2,  iDays  
  aDate  =  sDate1.split("-")  
  oDate1  =  new  Date(aDate[1]  +  '-'  +  aDate[2]  +  '-'  +  aDate[0])    //转换为12-18-2002格式  
  aDate  =  sDate2.split("-")  
  oDate2  =  new  Date(aDate[1]  +  '-'  +  aDate[2]  +  '-'  +  aDate[0])  
  iDays  =  parseInt(Math.abs(oDate1  -  oDate2)  /  1000  /  60  /  60  /24)    //把相差的毫秒数转换为天数  
  return  iDays  
}
</script>

</head>
<body onload="time()">
<h2 id="showtime"></h2>
<h1>欢迎来到逸舟个人网站</h1>
<h3>经注册后，您的访问次数将会被记录。谢谢支持</h3><br/>
<h3>有意建立GetHub个人网站的同学(这个是免费滴)，也可以咨询qq，有空就回<a href="https://user.qzone.qq.com/1687251332/infocenter">个人链接</a></h3>
<h3><a href="https://pages.github.com/">方法链接（需要翻墙）</a></h3>
<button id="btn_login">登录</button>
<button id="btn_logout">注销</button> <br/>
<img src="img/1.jpg" /><br/>
<span id="inputSpan">请输入您的id：<input type="text" id="inputname" value=""><button id="btn_send">提交</button></span><br/>
<div id="show_LocalStorage"></div><br/>
<h3>
	<a href="test.zip">下载空间助手备份助手插件</a>
</h3>
<video  controls="controls" autoplay="autoplay" >
	<source src="test.mp4" type="video/mp4"></source>
</video>
<br />
<br />
<h1>目前QQ信息泄漏严重，故而已经开始逃离QQ，24小时内回复</h1>
</body>
</body>
</html>
